"use strict";(self.webpackChunkappworks_fusion_design_lite=self.webpackChunkappworks_fusion_design_lite||[]).push([[528],{34185:function(e,n,r){r.r(n),r.d(n,{default:function(){return U}});var s=r(59301),a=r(21499),o=r(28207),i=r(6214),t=r(97876),l=r(65894),c=r(76381),u=r(18726),d=r(62635),m=r(50558),f=r(85552),h=r(28556);function g(e,n){var r=(0,s.useRef)(null);(0,s.useEffect)((function(){r.current=e})),(0,s.useEffect)((function(){var e;if(null!==n){var s=setInterval((function e(){r.current()}),n||0);return function(){return clearInterval(s)}}}),[n])}var p="LoginBlock--LoginBlock--14N5omi",v="LoginBlock--innerBlock--n92n1gc",x="LoginBlock--logo--swKl-ms",j="LoginBlock--infoLine--3r8gycm",y="LoginBlock--infoLeft--2V1Es5p",k="LoginBlock--desc--nzKi_4A",L="LoginBlock--active--1pLEYkQ",B="LoginBlock--line--39n9TLf",N="LoginBlock--innerBeforeInput--3EyQP7M",w="LoginBlock--innerAfterInput--2vUoApC",b="LoginBlock--sendCode--iyEXNX8",Z="LoginBlock--otherLogin--2YnGQI0",S="LoginBlock--icon--28qWEYX",A="LoginBlock--link--1Ao0Sgc",I="LoginBlock--submitBtn--2zkmWKW",C=r(37712);function q(e,n){return K(e)||X(e,n)||z(e,n)||E()}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function z(e,n){if(e){if("string"==typeof e)return T(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,n):void 0}}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function X(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var s=[],a=!0,o=!1,i,t;try{for(r=r.call(e);!(a=(i=r.next()).done)&&(s.push(i.value),!n||s.length!==n);a=!0);}catch(e){o=!0,t=e}finally{try{a||null==r.return||r.return()}finally{if(o)throw t}}return s}}function K(e){if(Array.isArray(e))return e}var M=a.Z.Item,_={name:"",password:"",autoLogin:!0,phone:"",code:""},Q=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dataSource:_},r=(0,m.aC)(),Z=q(r,2),S=Z[0],E=Z[1],z=n.dataSource,T=void 0===z?_:z,X=h.Z.useModel("user"),K=q(X,2),Q=K[0],F=K[1],W=(0,s.useState)(T),O=q(W,2),U=O[0],Y=O[1],P=(0,s.useState)(!1),R=q(P,2),V=R[0],G=R[1],H=(0,s.useState)(!1),J=q(H,2),$=J[0],D=J[1],ee=(0,s.useState)(59),ne=q(ee,2),re=ne[0],se=ne[1];g((function(){se(re-1),re<=0&&(G(!1),se(59))}),V?1e3:null);var ae=function e(n){Y(n)},oe=function e(n,r){r||G(!0)},ie=function e(n,r){if(r)console.log("errors",r);else{console.log("values:",n);var s={};$?(s.phone=n.phone,s.code=n.code):(s.account=n.name,s.password=n.password),s.autoLogin=n.autoLogin,(0,f.Wy)(s).then((function(e){if(0!==(null==e?void 0:e.code));else{var n,r;if(o.Z.success("\u767b\u5f55\u6210\u529f"),localStorage.setItem("TOKEN",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:""),E({isLogin:!0}),(0,f.Le)().then((function(e){if(0===e.code){var n=e.data;setTimeout((function(){var e,r;E({isLogin:!0,currentUser:{name:null!==(e=null==n?void 0:n.accountName)&&void 0!==e?e:"-",department:"",avatar:"https://gw.alipayobjects.com/zos/antfincdn/XAosXuNZyF/BiazfanxmamNRoxxVxka.png",userId:null!==(r=null==n?void 0:n.userId)&&void 0!==r?r:"-"}})}),300)}})),!u.m8)return;var s=null===d.Qw||void 0===d.Qw?void 0:(0,d.Qw)();u.m8.push(null!==(r=null==s?void 0:s.redirect)&&void 0!==r?r:"/")}}))}},te=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(M,{format:"tel",required:!0,requiredMessage:"\u5fc5\u586b",asterisk:!1,children:(0,C.jsx)(i.Z,{name:"phone",innerBefore:(0,C.jsxs)("span",{className:N,children:["+86",(0,C.jsx)("span",{className:B})]}),maxLength:20,placeholder:"\u624b\u673a\u53f7"})}),(0,C.jsx)(M,{required:!0,requiredMessage:"\u5fc5\u586b",style:{marginBottom:0},children:(0,C.jsx)(i.Z,{name:"code",innerAfter:(0,C.jsxs)("span",{className:w,children:[(0,C.jsx)("span",{className:B}),(0,C.jsx)(a.Z.Submit,{text:!0,type:"primary",style:{width:64},disabled:!!V,validate:["phone"],onClick:oe,className:b,children:V?"".concat(re,"\u79d2\u540e\u518d\u8bd5"):"\u83b7\u53d6\u9a8c\u8bc1\u7801"})]}),maxLength:20,placeholder:"\u9a8c\u8bc1\u7801"})})]}),le=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(M,{required:!0,requiredMessage:"\u5fc5\u586b",children:(0,C.jsx)(i.Z,{name:"name",maxLength:20,placeholder:"\u7528\u6237\u540d"})}),(0,C.jsx)(M,{required:!0,requiredMessage:"\u5fc5\u586b",style:{marginBottom:0},children:(0,C.jsx)(i.Z.Password,{name:"password",htmlType:"password",placeholder:"\u5bc6\u7801"})})]}),ce=function e(){D(!1)},ue=function e(){D(!0)};return(0,C.jsx)("div",{className:p,children:(0,C.jsxs)("div",{className:v,children:[(0,C.jsx)("a",{href:"#",children:(0,C.jsx)("img",{className:x,src:"https://img.alicdn.com/tfs/TB1KtN6mKH2gK0jSZJnXXaT1FXa-1014-200.png",alt:"logo"})}),(0,C.jsxs)("div",{className:k,children:[(0,C.jsx)("span",{onClick:ce,className:$?void 0:L,children:"\u8d26\u6237\u5bc6\u7801\u767b\u5f55"}),(0,C.jsx)(t.Z,{direction:"ver"}),(0,C.jsx)("span",{onClick:ue,className:$?L:void 0,children:"\u624b\u673a\u53f7\u767b\u5f55"})]}),(0,C.jsxs)(a.Z,{value:U,onChange:ae,size:"large",children:[$?te:le,(0,C.jsxs)("div",{className:j,children:[(0,C.jsx)(M,{style:{marginBottom:0},children:(0,C.jsx)(l.Z,{name:"autoLogin",className:y,children:"\u81ea\u52a8\u767b\u5f55"})}),(0,C.jsx)("div",{children:(0,C.jsx)("a",{href:"/",className:A,children:"\u5fd8\u8bb0\u5bc6\u7801"})})]}),(0,C.jsx)(M,{style:{marginBottom:10},children:(0,C.jsx)(a.Z.Submit,{type:"primary",htmlType:"submit",onClick:ie,className:I,validate:!0,children:"\u767b\u5f55"})}),(0,C.jsxs)("div",{className:j,children:[(0,C.jsxs)("div",{className:y,children:["\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f ",(0,C.jsx)(c.Z,{type:"atm",size:"small"})," ",(0,C.jsx)(c.Z,{type:"atm",size:"small"})," ",(0,C.jsx)(c.Z,{type:"atm",size:"small"})]}),(0,C.jsx)("a",{href:"/",className:A,children:"\u6ce8\u518c\u8d26\u53f7"})]})]})]})})},F=Q;function W(){return(0,C.jsx)("div",{className:"Login-page",children:(0,C.jsx)(F,{})})}var O,U=W}}]);